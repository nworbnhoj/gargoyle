var upS=new Object;var reloadTarget="http://192.168.1.1/";function doUpgrade(){if(document.getElementById("upgrade_file").value.length==0){alert(upS.SelErr)}else{var curIp=uciOriginal.get("network","lan","ipaddr");curIp=curIp==""?"192.168.1.1":curIp;reloadTarget=document.getElementById("upgrade_preserve").checked==true?"http://"+curIp+"/":"http://192.168.1.1/";confirmUpgrade=window.confirm(upS.Warn2);if(confirmUpgrade){document.getElementById("upgrade_hash").value=document.cookie.replace(/^.*hash=/,"").replace(/[\t ;]+.*$/,"");document.getElementById("upgrade_form").submit();setControlsEnabled(false,true,upS.Uping)}}}function uploaded(){setControlsEnabled(false,true,upS.UWait)}function upgraded(){setControlsEnabled(false,true,upS.Rbtg);doRedirect=function(){window.location=reloadTarget};setTimeout("doRedirect()",120*1e3)}function failure(){setControlsEnabled(true);alert(upS.UErr+"\n")}function failureByBootloader(){setControlsEnabled(true);alert(upS.UErrBB+"\n")}function setUpgradeFormat(){document.getElementById("upgrade_arch").value=platform=="broadcom"?"brcm":"not_brcm";if(platform=="broadcom"){setChildText("upgrade_text",upS.brcmT)}else if(platform=="ar71xx"){setChildText("upgrade_text",upS.ar71xxT)}else if(platform=="mvebu"){setChildText("upgrade_text",upS.mvebu)}else{setChildText("upgrade_text",upS.othrT)}setChildText("gargoyle_version",gargoyleVersion)}